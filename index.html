<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" href="stylesheets/github-dark.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Statechart-visualizer</title>
  <meta name="description" content="Display statecharts properly from a yaml or a statechart object from sismic">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Statechart-visualizer</h1>
    </header>
    <div id="container">
      <p class="tagline">Display statecharts properly from a yaml or a statechart object from sismic</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/radioGiorgio/statechart-visualizer/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/radioGiorgio/statechart-visualizer/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/radioGiorgio/statechart-visualizer" class="code">View Statechart-visualizer on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h1>
<a id="statechart-visualizer" class="anchor" href="#statechart-visualizer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Statechart Visualizer</h1>

<p>Display statecharts properly from a yaml or a statechart object from Sismic.</p>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h2>

<p>This module is initially planned to display statecharts from sismic but you can
easily use it to create directly your own statecharts and display them. The purpose of the
project is display statecharts properly and add constraints (like <em>state 1 must be left to state2</em>)
on the states.</p>

<p>You can then export your statechart as svg file.</p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<p>You will find here the list of modules needed to use it :</p>

<ul>
<li><a href="https://github.com/AlexandreDecan/sismic">Sismic</a></li>
<li><a href="https://github.com/pybee/cassowary">Cassowary</a></li>
<li><a href="https://github.com/biazzotto/svgwrite">svgwrite</a></li>
<li>python 3</li>
</ul>

<h2>
<a id="interactive-mode" class="anchor" href="#interactive-mode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Interactive mode</h2>

<p>You can test the module interactively from a simple yaml file (representing
a statechart) following this way :</p>

<pre><code>python main.py &lt;your-file.yaml&gt;
</code></pre>

<p>Each action will create (or update) a svg file with the name of the statechart.
For more informations about the actions you are able to do with this program, type simply <code>help</code> while 
main.py is launched.
Note that the syntax of the yaml file to represent a statechart is specified in the <a href="http://sismic.readthedocs.io/en/master/format.html#defining-statecharts-in-yaml">sismic documentation</a>.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Let assume that you have created a statechart object with Sismic. You can create a svg file from this statechart.</p>

<ol>
<li>Create a RootBox with this statechart.</li>
<li>Export this RootBox to a svg file.</li>
</ol>

<pre><code>from structures.box_elements import RootBox
box = RootBox(statechart)
svgwriter.export(box)
</code></pre>

<p>Using the constraint solver (using the cassowary alogorithm), the boxes representing the states will be arranged
following the text on the transtitions and alternatively following a horizontal axis and a vertical axis.
After that, the transitions will be drawn minimizing intersections with boxes, transitions and other text.</p>

<p>If the arrangement doesn't suit you, you can add mannualy constraint on the boxes with the method <code>box.add_constraint</code>.
If you don't want to display the entire text on transitions, you can hide a part of it, for example the action with 
<code>box._hide_action_on_transitions</code>.</p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>Suppose we want to display the statechart in <a href="https://github.com/radioGiorgio/statechart-visualizer/blob/master/tests/elevator.yaml">tests/elevator.yaml</a>.
First, we do :</p>

<pre><code>import svgwriter
from sismic import io, model
from structures.box_elements import RootBox

with open('tests/elevator.yaml', 'r') as stream:
        statechart = io.import_from_yaml(stream)
        assert isinstance(statechart, model.Statechart)

box = RootBox(statechart=statechart)
svgwriter.export(box, file_name='examples/Elevator')
</code></pre>

<p><img src="https://cdn.rawgit.com/radioGiorgio/statechart-visualizer/master/examples/Elevator_simple.svg" alt="alt text"></p>

<p>But we want to have another arrangement of the boxes.
Suppose that we want :</p>

<ul>
<li>movingDown at north of doorsClosed</li>
<li>doorsClosed at north-east of doorsOpen</li>
<li>floorListener at south of movingElevator</li>
</ul>

<p>and we don't want to display the actions.</p>

<pre><code>get = lambda x: box.get_box_by_name(x)
box.add_constraint(Constraint(get('moving'), 'north', get('doorsClosed')))
box.add_constraint(Constraint(get('doorsClosed'), 'north', get('doorsOpen')))
box.add_constraint(Constraint(get('doorsClosed'), 'east', get('doorsOpen')))
box.add_constraint(Constraint(get('floorListener'), 'south', get('movingElevator')))
box.hide_action_on_transitions()
svgwriter.export(box, file_name='examples/Elevator')
</code></pre>

<p><img src="https://cdn.rawgit.com/radioGiorgio/statechart-visualizer/master/examples/Elevator.svg" alt="alt text"></p>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/radioGiorgio" class="avatar"><img src="https://avatars2.githubusercontent.com/u/9151959?v=3&amp;s=60" width="48" height="48"></a> <a href="https://github.com/radioGiorgio">radioGiorgio</a> maintains <a href="https://github.com/radioGiorgio/statechart-visualizer">Statechart-visualizer</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/radioGiorgio/statechart-visualizer/tarball/master" class="tar">tar</a><a href="https://github.com/radioGiorgio/statechart-visualizer/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
